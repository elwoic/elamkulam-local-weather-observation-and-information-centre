<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="style.css">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Elamkulam Local Weather Observation and Information Centre</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* ===== STYLE SECTION ===== */

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f8fb;
      color: #222;
    }

    /* Header Container */
    .imd-header {
      background: #004a80;  /* FULL DARK BLUE */
      color: white;
    }

    /* Header Top Section */
    .imd-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 15px 20px;
    }

    .imd-logo-left,
    .imd-logo-right {
      width: 65px;
      height: auto;
      border-radius: 8px;
      background: white;      /* optional, remove if not needed */
      padding: 4px;           /* optional */
    }

    .imd-title {
      text-align: center;
      flex: 1;
      color: white;
    }

    .imd-title h2 {
      margin: 4px 0;
      font-size: 20px;
      color: #ffffff;
    }

    .imd-title h3 {
      margin: 2px 0;
      font-size: 14px;
      color: #d8e8f5;
    }

    .imd-title h4 {
      margin: 2px 0;
      font-size: 13px;
      color: #c2d7eb;
    }

    /* Navigation Bar */
    .imd-nav {
      background: #003a63;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }

    .imd-nav a {
      color: white;
      text-decoration: none;
      padding: 10px 15px;
      display: inline-block;
      font-size: 14px;
    }

    .imd-nav a:hover {
      background: #0265b4;
    }

    /* Main Sections */
    main {
      padding: 20px;
    }

    .intro {
      background: #ffffff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    .intro h2 {
      color: #004a80;
      margin-bottom: 10px;
    }

    .links {
      background: #ffffff;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .links h3 {
      color: #004a80;
    }

    .links ul {
      list-style-type: none;
      padding: 0;
    }

    .links li {
      margin: 6px 0;
    }

    .links a {
      color: #0265b4;
      text-decoration: none;
    }

    .links a:hover {
      text-decoration: underline;
    }

    /* Footer */
    footer {
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      text-align: center;
      padding: 15px;
      background: #004a80;
      color: white;
      font-size: 13px;
      margin-top: 20px;
    }

    .imd-logo-footer {
      position: absolute;
      bottom: 5px;
      right: 10px;
      width: 40px;
      height: auto;
      border-radius: 4px;
      opacity: 0.8;
    }
  </style>
</head>

<body>

  <!-- ===== HEADER SECTION ===== -->
  <header class="imd-header">
    <div class="imd-top">
      <img src="ELWOIC.png" alt="Left Logo" class="imd-logo-left" />

      <div class="imd-title">
        <h3></h3>
        <h2>Elamkulam Local Weather Observation & Information Centre</h2>
        <h4>Community Weather Monitoring Initiative, Elamkulam, Kerala</h4>
      </div>

      <img src="Elamkulam Weather Logo Design.1.png" alt="Right Logo" class="imd-logo-right" />
    </div>

    <nav class="imd-nav">
      <a href="#"></a>
      <a href="#">ABOUT US</a>
      <a href="#"></a>
      <a href="#"></a>
      <a href="#">CONTACT US</a>
      <a href="#"></a>
      <a href="#">OTHERS</a>
    </nav>
    <!-- ===== ELWOIC SCROLLING MARQUEE ===== -->
<div class="marquee-container">
  <div class="scroll-text" id="info-marquee">
    ELWOIC - <span class="highlight">Elamkulam Local Weather Observation And Information Centre</span> 
    In coordination with <span class="highlight">House Public Board Department (HPBD)</span> | 
    <span class="highlight">Real-Time Weather Monitoring</span> | Data refreshes every <span id="refresh-time">30</span> minutes from multiple sources | 
    Location: 10.908¬∞N, 76.229¬∞E | Do not hesitate to contact us for more details. The details shown on the site may vary, therefore contacting is a good option if needed. 
    Contact No: 04933316750. ‚ö†Ô∏è Both ELWOIC and HPBD are a student-made project, not an official one. ‚ö†Ô∏è
  </div>
</div>

<style>
.marquee-container {
  width: 100%;
  overflow: hidden;
  background-color: #004080; /* Blue background */
  padding: 10px 0;
  box-sizing: border-box;
  border-bottom: 2px solid #ffa200; /* Orange line bottom */
}

.scroll-text {
  display: inline-block;
  white-space: nowrap;
  font-weight: bold;
  color: yellow;
  animation: scroll 50s linear infinite;
  font-size: 16px;
}

.highlight {
  color: #00ffff;
}

@keyframes scroll {
  0% { transform: translateX(20%); }
  100% { transform: translateX(-100%); }
}
</style>

<script>
const refreshTime = 30;
document.getElementById("refresh-time").textContent = refreshTime;
</script>

  </header>

  <!-- ===== MAIN CONTENT ===== -->
  <main>
    <section>
      <!-- NOTICE BOX - ELWOIC THEME -->
<div class="notice-box" style="
    width: 100%;
    background:#FFFFFF ;
    border-left: 6px solid #ff4e4e;
    padding: 18px 20px;
    margin: 20px 0;
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
">

    <div style="display:flex; align-items:center; margin-bottom:12px;">
        <svg xmlns='http://www.w3.org/2000/svg' width='28' height='28' fill='#ff4d4d' viewBox='0 0 24 24' style="margin-right:10px;">
            <path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z'/>
        </svg>
        <h2 style="font-size: 1.6rem; font-weight: 700; color: #002b5c; margin:0;">Important Notice</h2>
    </div>

    <ul style="padding-left: 20px; margin:0; line-height:1.6; font-size: 1rem; color: #00315c; font-weight: 600;">
        <li>This website is <b>not an official Government or Panchayat owned entity</b>.</li>
        <li>This is a <b>persoanal project created by a student</b>for informational purposes.</li>
        <li>
            For official weather alerts and warnings, please visit 
            <a href="https://mausam.imd.gov.in/thiruvananthapuram/" target="_blank" style="color:#0056ff; text-decoration:underline;">
                IMD Kerala (Thiruvananthapuram)
            </a>.
        </li>
    </ul>

    <p style="margin-top: 12px; color: #555; font-size: 0.9rem; font-style: italic;">
        Cross-check severe weather alerts with official IMD sources.
    </p>

</div>

    <section id="manual-update" class="notice-box" style="
    width: 100%;
    background: #ffffff;
    border-left: 6px solid #004a80;
    padding: 18px 20px;
    margin: 20px 0;
    border-radius: 8px;
    font-family: 'Poppins', sans-serif;
    box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    text-align: center;
">
    <h2 style="margin-top:0; color:#004a80;">ELWOIC Manual Update</h2>

    <h3 style="color:#ff3333; margin-bottom:5px;">Current  Update Section</h3>
    <p id="weather-message" style="margin:8px 0; font-size:1rem; color:#00315c;"></p>

    <h3 style="color:#ffcc00; margin-top:20px; margin-bottom:5px;">Pre-Update Section</h3>
    <p id="preupdate-message" style="margin:8px 0; font-size:0.95rem; color:#004a80;"></p>

    <h3 style="color:#0066cc; margin-top:20px; margin-bottom:5px;">Information Section</h3>
    <p id="info-message" style="margin:8px 0; font-size:0.9rem; color:#555;"></p>
</section>
      <style>
  .marquee-container {
    position: relative;
    overflow: hidden;
    background:0000ff
    color: white;
    padding: 10px 0;
    border-radius: 0;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    font-family: "Poppins", sans-serif;
  }

  .marquee-text {
    display: inline-block;
    white-space: nowrap;
    padding-left: 100%;
    animation: scroll 15s linear infinite;
    font-weight: 500;
    font-size: 1.1em;
    letter-spacing: 0.5px;
  }

  @keyframes scroll {
    from { transform: translateX(0); }
    to   { transform: translateX(-100%); }
  }

  .alert {
    background: linear-gradient(90deg, #ff4e50, #f9d423);
    font-weight: bold;
    color: #ffffff;
  }
</style>

<div class="marquee-container" id="marqueeBox">
  <div class="marquee-text" id="marqueeText">
    üå§Ô∏è Elamkulam Local Weather Observation And Information Center ‚Äî Gives you weather info of Elamkulam.
  </div>
</div>

<script>
  const marqueeBox = document.getElementById("marqueeBox");
  const marqueeText = document.getElementById("marqueeText");

  function showAlertMessage(message, durationSeconds = 10) {
    marqueeText.textContent = message;
    marqueeBox.classList.add("alert");

    setTimeout(() => {
      marqueeText.textContent =
        "üå§Ô∏è Elamkulam Local Weather Observation And Information Center ‚Äî Gives you weather info of Elamkulam.";
      marqueeBox.classList.remove("alert");
    }, durationSeconds * 1000);
  }
</script>
<h2 style="color: #0000ff;">
  ELWOIC- Easy Way To Watch Live Weather condition Of Elamkulam
</h2>
     <section id="weather-section">
  <style>
    #weather-section {
      font-family: 'Poppins', sans-serif;
      color: #000;
      padding: 20px;
      background-color: #ffffff; /* white background */
      border-radius: 12px;
      max-width: 700px;
      margin: auto;
    }
    #weather-section .info-boxes {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    #weather-section .info-box {
      flex: 1 1 30%;
      background: #f0f0f0;
      padding: 10px;
      border-radius: 10px;
      text-align: center;
    }
    #weather-section .info-title { font-weight: bold; margin-bottom: 5px; }
    #weather-section .info-value { font-size: 1.5em; }
    #weather-section .info-unit { font-size: 0.9em; color: #555; }
    #weather-section .last-update { margin-top: 15px; font-style: italic; }
    #weather-section .windy-container iframe {
      width: 100%;
      height: 400px;
      border: 0;
      margin-top: 20px;
      border-radius: 12px;
    }
  </style>

  <h2>üå¶ Elamkulam Weather Snapshot</h2>

  <div class="info-boxes">
    <div class="info-box">
      <div class="info-title">Temperature</div>
      <div class="info-value" id="temp">--</div>
      <div class="info-unit">¬∞C</div>
    </div>

    <div class="info-box">
      <div class="info-title">Feels Like</div>
      <div class="info-value" id="feels">--</div>
      <div class="info-unit">¬∞C</div>
    </div>

    <div class="info-box">
      <div class="info-title">Humidity</div>
      <div class="info-value" id="humidity">--</div>
      <div class="info-unit">%</div>
    </div>

    <div class="info-box">
      <div class="info-title">Wind Speed</div>
      <div class="info-value" id="wind">--</div>
      <div class="info-unit">km/h</div>
    </div>

    <div class="info-box">
      <div class="info-title">Rain (1h)</div>
      <div class="info-value" id="rain">--</div>
      <div class="info-unit">mm</div>
    </div>

    <div class="info-box">
      <div class="info-title">Pressure</div>
      <div class="info-value" id="pressure">--</div>
      <div class="info-unit">hPa</div>
    </div>

    <div class="info-box">
      <div class="info-title">Cloud Cover</div>
      <div class="info-value" id="clouds">--</div>
      <div class="info-unit">%</div>
    </div>

    <div class="info-box">
      <div class="info-title">Visibility</div>
      <div class="info-value" id="visibility">--</div>
      <div class="info-unit">km</div>
    </div>
  </div>

  <p class="last-update">Last updated: <span id="updated">--</span></p>

  <!-- Windy Radar -->
  <div class="windy-container">
    <iframe
      src="https://embed.windy.com/embed2.html?lat=10.9077&lon=76.2315&zoom=9&detailLat=10.9077&detailLon=76.2315&detail=true&metricWind=km/h&metricTemp=¬∞C&marker=true"
      frameborder="0"
      allowfullscreen>
    </iframe>
  </div>
<section>
<style>
  /* Your existing styles here */
  .weather-hours-box { max-width: 1000px; margin: 30px auto; background: #ffffff; border-radius: 12px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); font-family: "Poppins", sans-serif; }
  .weather-hours-box h2 { text-align: center; color: #0277BD; margin-bottom: 20px; font-size: 26px; }
  .weather-table { width: 100%; border-collapse: collapse; text-align: center; }
  .weather-table th { background: #0277BD; color: white; padding: 12px; }
  .weather-table td { border: 1px solid #ccc; padding: 12px; background: #fafafa; }
  @media (max-width: 700px) { .weather-table td, .weather-table th { padding: 6px; font-size: 12px; } }
  .weather-param { font-weight: 500; }
</style>

<div class="weather-hours-box">
  <h2>Elamkulam Weather ‚Äì Current & Next 9 Hours</h2>
  <table class="weather-table">
    <thead>
      <tr>
        <th>Parameter</th>
        <th>Current</th>
        <th>+3 Hours</th>
        <th>+6 Hours</th>
        <th>+9 Hours</th>
      </tr>
    </thead>
    <tbody id="weatherRows">
      <tr><td class="weather-param">Temperature (¬∞C)</td><td id="temp-current">--</td><td id="temp-3h">--</td><td id="temp-6h">--</td><td id="temp-9h">--</td></tr>
      <tr><td class="weather-param">Feels Like (¬∞C)</td><td id="feels-current">--</td><td id="feels-3h">--</td><td id="feels-6h">--</td><td id="feels-9h">--</td></tr>
      <tr><td class="weather-param">Humidity (%)</td><td id="humidity-current">--</td><td id="humidity-3h">--</td><td id="humidity-6h">--</td><td id="humidity-9h">--</td></tr>
      <tr><td class="weather-param">Condition</td><td id="cond-current">--</td><td id="cond-3h">--</td><td id="cond-6h">--</td><td id="cond-9h">--</td></tr>
      <tr><td class="weather-param">Wind (km/h)</td><td id="wind-current">--</td><td id="wind-3h">--</td><td id="wind-6h">--</td><td id="wind-9h">--</td></tr>
      <tr><td class="weather-param">Visibility (km)</td><td id="vis-current">--</td><td id="vis-3h">--</td><td id="vis-6h">--</td><td id="vis-9h">--</td></tr>
      <tr><td class="weather-param">Rain (mm)</td><td id="rain-current">--</td><td id="rain-3h">--</td><td id="rain-6h">--</td><td id="rain-9h">--</td></tr>
    </tbody>
  </table>
  <p style="text-align:center;margin-top:12px;font-size:12px;color:#555;">
    Last Updated: <span id="updated">--:--</span>
  </p>
</div>

<script>
const LAT = 10.9081;
const LON = 76.2296;

// Fill a table row for current + 3,6,9 hours
function fillTable(hourlyData) {
  const times = [0,3,6,9]; // index offsets
  const temp = hourlyData.temperature_2m;
  const humidity = hourlyData.relativehumidity_2m;
  const wind = hourlyData.windspeed_10m;
  const rain = hourlyData.precipitation;
  const visibility = hourlyData.visibility;
  const cond = hourlyData.condition || ["Clear","Clear","Clear","Clear"]; // placeholder

  document.getElementById("temp-current").textContent = temp[times[0]] ?? "--";
  document.getElementById("temp-3h").textContent = temp[times[1]] ?? "--";
  document.getElementById("temp-6h").textContent = temp[times[2]] ?? "--";
  document.getElementById("temp-9h").textContent = temp[times[3]] ?? "--";

  document.getElementById("feels-current").textContent = temp[times[0]] ?? "--";
  document.getElementById("feels-3h").textContent = temp[times[1]] ?? "--";
  document.getElementById("feels-6h").textContent = temp[times[2]] ?? "--";
  document.getElementById("feels-9h").textContent = temp[times[3]] ?? "--";

  document.getElementById("humidity-current").textContent = humidity[times[0]] ?? "--";
  document.getElementById("humidity-3h").textContent = humidity[times[1]] ?? "--";
  document.getElementById("humidity-6h").textContent = humidity[times[2]] ?? "--";
  document.getElementById("humidity-9h").textContent = humidity[times[3]] ?? "--";

  document.getElementById("wind-current").textContent = wind[times[0]] ?? "--";
  document.getElementById("wind-3h").textContent = wind[times[1]] ?? "--";
  document.getElementById("wind-6h").textContent = wind[times[2]] ?? "--";
  document.getElementById("wind-9h").textContent = wind[times[3]] ?? "--";

  document.getElementById("rain-current").textContent = rain[times[0]] ?? "--";
  document.getElementById("rain-3h").textContent = rain[times[1]] ?? "--";
  document.getElementById("rain-6h").textContent = rain[times[2]] ?? "--";
  document.getElementById("rain-9h").textContent = rain[times[3]] ?? "--";

  document.getElementById("vis-current").textContent = visibility[times[0]] ?? "--";
  document.getElementById("vis-3h").textContent = visibility[times[1]] ?? "--";
  document.getElementById("vis-6h").textContent = visibility[times[2]] ?? "--";
  document.getElementById("vis-9h").textContent = visibility[times[3]] ?? "--";

  document.getElementById("cond-current").textContent = cond[times[0]] ?? "--";
  document.getElementById("cond-3h").textContent = cond[times[1]] ?? "--";
  document.getElementById("cond-6h").textContent = cond[times[2]] ?? "--";
  document.getElementById("cond-9h").textContent = cond[times[3]] ?? "--";

  document.getElementById("updated").textContent = new Date().toLocaleTimeString();
}

async function fetchWeather() {
  try {
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&hourly=temperature_2m,relativehumidity_2m,precipitation,windspeed_10m,visibility&timezone=auto`;
    const res = await fetch(url);
    const data = await res.json();
    fillTable(data.hourly);
  } catch (err) {
    console.error("Weather fetch error:", err);
  }
}

document.addEventListener("DOMContentLoaded", () => {
  fetchWeather();
  setInterval(fetchWeather, 120000); // update every 2 minutes
});
</script>
</section>

<section>
</div>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

  .weather-mini-dashboard {
    max-width: 900px;
    margin: 5px auto;
    padding: 10px;
    background: transparent;
    border-radius: 10px;
    font-family: 'Poppins', sans-serif;
  }

  .weather-mini-dashboard h2 {
    text-align: center;
    color: #004080;
    font-weight: 600;
    font-size: 1.1em;
    margin-bottom: 8px;
  }

  .info-boxes {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
  }

  .info-box {
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    text-align: center;
    padding: 8px 5px;
    flex: 1 1 120px;
    min-width: 110px;
    max-width: 140px;
  }

  .info-title {
    font-size: 0.70em;
    color: #004080;
    margin-bottom: 2px;
  }

  .info-value {
    font-size: 1.2em;
    font-weight: 700;
    color: #333;
  }

  .info-unit {
    font-size: 0.70em;
    color: #777;
  }

  .last-update {
    text-align: center;
    color: #666;
    font-size: 0.75em;
    margin-top: 6px;
  }

  /* ‚≠ê Windy iframe style */
  .windy-container {
    margin-top: 12px;
    width: 100%;
    height: 380px;
    border-radius: 10px;
    overflow: hidden;
  }

  .windy-container iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  @media (max-width: 480px) {
    .info-box { flex: 1 1 80px; min-width: 80px; }
    .info-value { font-size: 1.1em; }
    .windy-container { height: 300px; }
  }
</style>
<script>
// --- Weather Loader ---
const OPENWEATHER_KEY = "856b819166fedc7df9e65814b23e0970";
const LAT = 10.9081;
const LON = 76.2296;

async function fetchOpenWeather() {
  const url = `https://api.openweathermap.org/data/2.5/forecast?lat=${LAT}&lon=${LON}&appid=${OPENWEATHER_KEY}&units=metric`;
  const res = await fetch(url);
  if (!res.ok) throw new Error("OpenWeather failed");
  return await res.json();
}

// Helper: check value
function safeVal(v) { return v ?? "--"; }

async function loadWeatherTable() {
  try {
    const data = await fetchOpenWeather();
    // current + next 3 forecasts (3h, 6h, 9h)
    const list = data.list;
    const current = list[0];
    const f3 = list[1];
    const f6 = list[2];
    const f9 = list[3];

    // Fill table
    document.getElementById("temp-current").textContent = safeVal(current.main.temp.toFixed(1));
    document.getElementById("temp-3h").textContent = safeVal(f3.main.temp.toFixed(1));
    document.getElementById("temp-6h").textContent = safeVal(f6.main.temp.toFixed(1));
    document.getElementById("temp-9h").textContent = safeVal(f9.main.temp.toFixed(1));

    document.getElementById("feels-current").textContent = safeVal(current.main.feels_like.toFixed(1));
    document.getElementById("feels-3h").textContent = safeVal(f3.main.feels_like.toFixed(1));
    document.getElementById("feels-6h").textContent = safeVal(f6.main.feels_like.toFixed(1));
    document.getElementById("feels-9h").textContent = safeVal(f9.main.feels_like.toFixed(1));

    document.getElementById("humidity-current").textContent = safeVal(current.main.humidity);
    document.getElementById("humidity-3h").textContent = safeVal(f3.main.humidity);
    document.getElementById("humidity-6h").textContent = safeVal(f6.main.humidity);
    document.getElementById("humidity-9h").textContent = safeVal(f9.main.humidity);

    document.getElementById("cond-current").textContent = safeVal(current.weather[0].description);
    document.getElementById("cond-3h").textContent = safeVal(f3.weather[0].description);
    document.getElementById("cond-6h").textContent = safeVal(f6.weather[0].description);
    document.getElementById("cond-9h").textContent = safeVal(f9.weather[0].description);

    document.getElementById("wind-current").textContent = safeVal((current.wind.speed * 3.6).toFixed(1));
    document.getElementById("wind-3h").textContent = safeVal((f3.wind.speed * 3.6).toFixed(1));
    document.getElementById("wind-6h").textContent = safeVal((f6.wind.speed * 3.6).toFixed(1));
    document.getElementById("wind-9h").textContent = safeVal((f9.wind.speed * 3.6).toFixed(1));

    document.getElementById("vis-current").textContent = safeVal((current.visibility/1000).toFixed(1));
    document.getElementById("vis-3h").textContent = safeVal((f3.visibility/1000).toFixed(1));
    document.getElementById("vis-6h").textContent = safeVal((f6.visibility/1000).toFixed(1));
    document.getElementById("vis-9h").textContent = safeVal((f9.visibility/1000).toFixed(1));

    const rain = r => r.rain && r.rain["3h"] ? r.rain["3h"].toFixed(2) : "0.00";
    document.getElementById("rain-current").textContent = rain(current);
    document.getElementById("rain-3h").textContent = rain(f3);
    document.getElementById("rain-6h").textContent = rain(f6);
    document.getElementById("rain-9h").textContent = rain(f9);

    document.getElementById("updated").textContent = new Date().toLocaleTimeString();
  } catch (e) {
    console.error("Weather load failed:", e);
  }
}

// Initial load + refresh every 2 minutes
loadWeatherTable();
setInterval(loadWeatherTable, 120000);
</script>
      </section>
  <!-- ELWOIC WEATHER DASHBOARD -->
<section>
<style>
  /* Your existing styles here */
  .weather-hours-box { max-width: 1000px; margin: 30px auto; background: #ffffff; border-radius: 12px; padding: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); font-family: "Poppins", sans-serif; }
  .weather-hours-box h2 { text-align: center; color: #0277BD; margin-bottom: 20px; font-size: 26px; }
  .weather-table { width: 100%; border-collapse: collapse; text-align: center; }
  .weather-table th { background: #0277BD; color: white; padding: 12px; }
  .weather-table td { border: 1px solid #ccc; padding: 12px; background: #fafafa; }
  @media (max-width: 700px) { .weather-table td, .weather-table th { padding: 6px; font-size: 12px; } }
  .weather-param { font-weight: 500; }
</style>

<div class="weather-hours-box">
  <h2>Elamkulam Weather ‚Äì Current & Next 9 Hours</h2>
  <table class="weather-table">
    <thead>
      <tr>
        <th>Parameter</th>
        <th>Current</th>
        <th>+3 Hours</th>
        <th>+6 Hours</th>
        <th>+9 Hours</th>
      </tr>
    </thead>
    <tbody id="weatherRows">
      <tr><td class="weather-param">Temperature (¬∞C)</td><td id="temp-current">--</td><td id="temp-3h">--</td><td id="temp-6h">--</td><td id="temp-9h">--</td></tr>
      <tr><td class="weather-param">Feels Like (¬∞C)</td><td id="feels-current">--</td><td id="feels-3h">--</td><td id="feels-6h">--</td><td id="feels-9h">--</td></tr>
      <tr><td class="weather-param">Humidity (%)</td><td id="humidity-current">--</td><td id="humidity-3h">--</td><td id="humidity-6h">--</td><td id="humidity-9h">--</td></tr>
      <tr><td class="weather-param">Condition</td><td id="cond-current">--</td><td id="cond-3h">--</td><td id="cond-6h">--</td><td id="cond-9h">--</td></tr>
      <tr><td class="weather-param">Wind (km/h)</td><td id="wind-current">--</td><td id="wind-3h">--</td><td id="wind-6h">--</td><td id="wind-9h">--</td></tr>
      <tr><td class="weather-param">Visibility (km)</td><td id="vis-current">--</td><td id="vis-3h">--</td><td id="vis-6h">--</td><td id="vis-9h">--</td></tr>
      <tr><td class="weather-param">Rain (mm)</td><td id="rain-current">--</td><td id="rain-3h">--</td><td id="rain-6h">--</td><td id="rain-9h">--</td></tr>
    </tbody>
  </table>
  <p style="text-align:center;margin-top:12px;font-size:12px;color:#555;">
    Last Updated: <span id="updated">--:--</span>
  </p>
</div>

<script>
const LAT = 10.9081;
const LON = 76.2296;

// Fill a table row for current + 3,6,9 hours
function fillTable(hourlyData) {
  const times = [0,3,6,9]; // index offsets
  const temp = hourlyData.temperature_2m;
  const humidity = hourlyData.relativehumidity_2m;
  const wind = hourlyData.windspeed_10m;
  const rain = hourlyData.precipitation;
  const visibility = hourlyData.visibility;
  const cond = hourlyData.condition || ["Clear","Clear","Clear","Clear"]; // placeholder

  document.getElementById("temp-current").textContent = temp[times[0]] ?? "--";
  document.getElementById("temp-3h").textContent = temp[times[1]] ?? "--";
  document.getElementById("temp-6h").textContent = temp[times[2]] ?? "--";
  document.getElementById("temp-9h").textContent = temp[times[3]] ?? "--";

  document.getElementById("feels-current").textContent = temp[times[0]] ?? "--";
  document.getElementById("feels-3h").textContent = temp[times[1]] ?? "--";
  document.getElementById("feels-6h").textContent = temp[times[2]] ?? "--";
  document.getElementById("feels-9h").textContent = temp[times[3]] ?? "--";

  document.getElementById("humidity-current").textContent = humidity[times[0]] ?? "--";
  document.getElementById("humidity-3h").textContent = humidity[times[1]] ?? "--";
  document.getElementById("humidity-6h").textContent = humidity[times[2]] ?? "--";
  document.getElementById("humidity-9h").textContent = humidity[times[3]] ?? "--";

  document.getElementById("wind-current").textContent = wind[times[0]] ?? "--";
  document.getElementById("wind-3h").textContent = wind[times[1]] ?? "--";
  document.getElementById("wind-6h").textContent = wind[times[2]] ?? "--";
  document.getElementById("wind-9h").textContent = wind[times[3]] ?? "--";

  document.getElementById("rain-current").textContent = rain[times[0]] ?? "--";
  document.getElementById("rain-3h").textContent = rain[times[1]] ?? "--";
  document.getElementById("rain-6h").textContent = rain[times[2]] ?? "--";
  document.getElementById("rain-9h").textContent = rain[times[3]] ?? "--";

  document.getElementById("vis-current").textContent = visibility[times[0]] ?? "--";
  document.getElementById("vis-3h").textContent = visibility[times[1]] ?? "--";
  document.getElementById("vis-6h").textContent = visibility[times[2]] ?? "--";
  document.getElementById("vis-9h").textContent = visibility[times[3]] ?? "--";

  document.getElementById("cond-current").textContent = cond[times[0]] ?? "--";
  document.getElementById("cond-3h").textContent = cond[times[1]] ?? "--";
  document.getElementById("cond-6h").textContent = cond[times[2]] ?? "--";
  document.getElementById("cond-9h").textContent = cond[times[3]] ?? "--";

  document.getElementById("updated").textContent = new Date().toLocaleTimeString();
}

async function fetchWeather() {
  try {
    const url = `https://api.open-meteo.com/v1/forecast?latitude=${LAT}&longitude=${LON}&hourly=temperature_2m,relativehumidity_2m,precipitation,windspeed_10m,visibility&timezone=auto`;
    const res = await fetch(url);
    const data = await res.json();
    fillTable(data.hourly);
  } catch (err) {
    console.error("Weather fetch error:", err);
  }
}

document.addEventListener("DOMContentLoaded", () => {
  fetchWeather();
  setInterval(fetchWeather, 120000); // update every 2 minutes
});
</script>
</section>


<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

  .weather-mini-dashboard {
    max-width: 900px;
    margin: 5px auto;
    padding: 10px;
    background: transparent;
    border-radius: 10px;
    font-family: 'Poppins', sans-serif;
  }

  .weather-mini-dashboard h2 {
    text-align: center;
    color: #004080;
    font-weight: 600;
    font-size: 1.1em;
    margin-bottom: 8px;
  }

  .info-boxes {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
  }

  .info-box {
    background: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    text-align: center;
    padding: 8px 5px;
    flex: 1 1 120px;
    min-width: 110px;
    max-width: 140px;
  }

  .info-title {
    font-size: 0.70em;
    color: #004080;
    margin-bottom: 2px;
  }

  .info-value {
    font-size: 1.2em;
    font-weight: 700;
    color: #333;
  }

  .info-unit {
    font-size: 0.70em;
    color: #777;
  }

  .last-update {
    text-align: center;
    color: #666;
    font-size: 0.75em;
    margin-top: 6px;
  }

  /* ‚≠ê Windy iframe style */
  .windy-container {
    margin-top: 12px;
    width: 100%;
    height: 380px;
    border-radius: 10px;
    overflow: hidden;
  }

  .windy-container iframe {
    width: 100%;
    height: 100%;
    border: none;
  }

  @media (max-width: 480px) {
    .info-box { flex: 1 1 80px; min-width: 80px; }
    .info-value { font-size: 1.1em; }
    .windy-container { height: 300px; }
  }
</style>
<center>
<h3> Average KERALA</h3>
<!-- KERALA WEATHER WIDGETS BLOCK -->
<div>
  <style>
    .widget-box {
      background: #ffffff;
      border-radius: 0px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      padding: 20px;
      max-width: 1200px;
      margin: 30px auto;
      text-align: center;
    }

    .widget-box h2 {
      color: #0277BD;
      font-size: 22px;
      margin-bottom: 15px;
      font-family: Arial, sans-serif;
    }

    .kerala-heading {
      color: #0277BD;
      font-family: Arial, sans-serif;
      margin-top: 40px;
      text-align: center;
    }
  </style>

  <div class="widget-box">
    <h2>Expected In KERALA For Next 7 days</h2>

    <div id="ww_7d443210e054f"
         v="1.3"
         loc="id"
         a='{
           "t":"ticker",
           "lang":"en",
           "sl_lpl":1,
           "ids":["wl396"],
           "font":"Arial",
           "sl_ics":"one_a",
           "sl_sot":"celsius",
           "cl_bkg":"image",
           "cl_font":"#FFFFFF",
           "cl_cloud":"#FFFFFF",
           "cl_persp":"#81D4FA",
           "cl_sun":"#FFC107",
           "cl_moon":"#FFC107",
           "cl_thund":"#FF5722"
         }'>
      <a href="https://weatherwidget.org/" id="ww_7d443210e054f_u" target="_blank">
        Free weather widget for website
      </a>
    </div>
  </div>
<center>
  <script async src="https://app3.weatherwidget.org/js/?id=ww_7d443210e054f"></script>

  <h2 class="kerala-heading">KERALA Today</h2>

  <div id="ww_306f1b351ac5d"
       v="1.3"
       loc="id"
       a='{
         "t":"horizontal",
         "lang":"en",
         "sl_lpl":1,
         "ids":["wl396"],
         "font":"Arial",
         "sl_ics":"one_a",
         "sl_sot":"celsius",
         "cl_bkg":"image",
         "cl_font":"#FFFFFF",
         "cl_cloud":"#FFFFFF",
         "cl_persp":"#81D4FA",
         "cl_sun":"#FFC107",
         "cl_moon":"#FFC107",
         "cl_thund":"#FF5722"
       }'>
    <a href="https://weatherwidget.org/" id="ww_306f1b351ac5d_u" target="_blank">
      Free weather widget for website
    </a>
  </div>

  <script async src="https://app3.weatherwidget.org/js/?id=ww_306f1b351ac5d"></script>
</div>
</section>
   <section class="links">
      <h3>Useful Links</h3>
      <ul>
        <li><a href="https://elamkulamweatherobservationandinformationcenter.wordpress.com/privacy-policy/">Privacy and Policy</a></li>
        <li><a href="https://elamkulamweatherobservationandinformationcenter.wordpress.com/terms-of-service/">Terms of Service</a></li>
        <li><a href="https://elamkulamweatherobservationandinformationcenter.wordpress.com/">About & Discalimer</a></li>
      </ul>
    </section>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer>
    <p>¬© 2025 Elamkulam Local Weather Observation & Information Centre</p>
    <p>Designed and Managed by AswanthKK</p>

    <img src="House Public Board Seal of AswanthKK.pn" alt="HPBD Logo" class="imd-logo-footer" />
  </footer>
<script src="elwoic-manual-update.js"></script>
</body>
</html>

