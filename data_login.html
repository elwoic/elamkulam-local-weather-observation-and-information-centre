<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ELWOIC Login</title>
<style>
body {
  display: flex; justify-content: center; align-items: center;
  height: 100vh; background: #0f172a; color: white;
  font-family: system-ui;
}
.box {
  background: #020617; padding: 30px;
  border-radius: 12px; width: 300px;
}
input, button {
  width: 100%; padding: 10px;
  margin-top: 10px; border-radius: 6px;
  border: none;
}
button {
  background: #2563eb; color: white;
  font-weight: bold; cursor: pointer;
}
.error { color: #f87171; font-size: 0.85rem; }
</style>
</head>
<body>

<div class="box">
  <h2>üîê ELWOIC Access</h2>
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <div class="error" id="err"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

// THIS IS THE ADMIN PROJECT CONFIG (Where your users are)
const adminConfig = {
    apiKey: "AIzaSyALWX2l-9_6izgvt_JerJjTDbgNc5oT2VQ",
    authDomain: "administration-protal.firebaseapp.com"
};

// Initialize once
const app = initializeApp(adminConfig);
const auth = getAuth(app);

window.login = () => {
    const emailValue = document.getElementById('email').value;
    const passwordValue = document.getElementById('password').value;
    const errField = document.getElementById('err');

    if(!emailValue || !passwordValue) {
        errField.textContent = "Please enter both email and password.";
        return;
    }

    errField.textContent = "Checking credentials...";

    signInWithEmailAndPassword(auth, emailValue, passwordValue)
    .then(() => {
        // SUCCESS: Move to the Data Centre
        window.location.href = "index.html"; 
    })
    .catch(e => {
        console.error("Login Error:", e.code);
        // This is usually why it "doesn't work"
        if (e.code === 'auth/invalid-credential') {
            errField.textContent = "User not found in Administration Project.";
        } else {
            errField.textContent = "Error: " + e.message;
        }
    });
};
</script>
</body>
</html>
